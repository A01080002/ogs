{{ define "main" }}

  <div class="col-xs-3">
    {{ $segments := split .RelPermalink "/" }}
    {{ $subsection := index $segments 2 }}
    <h3>
      <a href="/docs/">Docs</a> / <span class="orange">
      {{ if eq $subsection "devguide"}}Developer Guide{{ end }}
      {{ if eq $subsection "benchmarks"}}Benchmarks{{ end }}
      {{ if eq $subsection "quickstart"}}Quickstart{{ end }}
      </span>
    </h3>
    <hr>
    <ul class="sidenav">
      {{ $currentPage := . }}
      {{ $currentMenu := index .Site.Menus $subsection }}
      {{ range $currentMenu }}
        {{ if .HasChildren }}
          <li class="category">{{ .Name }}</li>
          {{ range .Children }}
            <li><a href="{{ .URL }}"{{if $currentPage.IsMenuCurrent $subsection . }} class="active"{{end}}>{{ .Name }}</a></li>
          {{ end }}
        {{ end }}
      {{ end }}
    </ul>
  </div>
  <div class="col-xs-9">
    <h1>{{ .Title }}</h1>
    {{ if or (eq $subsection "devguide") (eq $subsection "quickstart") }}
    <div id="os-selector">Select OS: <a id="btn-win"><i class="fab fa-windows"></i> Windows</a> <a id="btn-linux"><i class="fab fa-linux"></i> Linux</a> <a id="btn-mac"><i class="fab fa-apple"></i> macOS</a></div>
    {{ end }}

    {{ .Content }}

    {{ partial "page-info" . }}
    <hr>
    {{ partial "footer-nav.html" . }}

  </div>

{{ end }}

{{ define "footer" }}

  {{ $segments := split .RelPermalink "/" }}
  {{ $subsection := index $segments 2 }}
  {{ if or (eq $subsection "devguide") (eq $subsection "quickstart") }}
  <script>
    $("#btn-win").click(function(){
      $(".win").show();
      $(".linux").hide();
      $(".mac").hide();
      $("#btn-win").addClass("active");
      $("#btn-linux").removeClass("active");
      $("#btn-mac").removeClass("active");
    });

    $("#btn-linux").click(function(){
      $(".win").hide();
      $(".linux").show();
      $(".mac").hide();
      $("#btn-win").removeClass("active");
      $("#btn-linux").addClass("active");
      $("#btn-mac").removeClass("active");
    });

    $("#btn-mac").click(function(){
      $(".win").hide();
      $(".linux").hide();
      $(".mac").show();
      $("#btn-win").removeClass("active");
      $("#btn-linux").removeClass("active");
      $("#btn-mac").addClass("active");
    });

    $( document ).ready(function() {
      if ($(".win").length == 0) {
        $("#os-selector").hide();
      }
      else {
        $("#btn-win").click();
      }
    });
  </script>
  {{ end }}

{{ end }}
